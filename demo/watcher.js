(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
	typeof define === 'function' && define.amd ? define(factory) :
	(global.Watcher = factory());
}(this, (function () { 'use strict';

// ----------------------------------------------------
var WatchEvent;
(function (WatchEvent) {
    WatchEvent[WatchEvent["ElementsAdded"] = 0] = "ElementsAdded";
    WatchEvent[WatchEvent["ElementsRemoved"] = 1] = "ElementsRemoved";
    WatchEvent[WatchEvent["ElementsChanged"] = 2] = "ElementsChanged";
    WatchEvent[WatchEvent["AttributesChanged"] = 3] = "AttributesChanged";
    WatchEvent[WatchEvent["TextChanged"] = 4] = "TextChanged";
})(WatchEvent || (WatchEvent = {}));

const LINK = 'color: #05f; font-weight: normal; text-decoration: underline';
const KW = 'color: #35b; font-weight: bold; font-style: normal; text-decoration: none';
const ATTR = 'color: #563; font-weight: normal; font-style: italic; text-decoration: none';
const VAL = 'color: #c36; font-weight: normal; font-style: normal; text-decoration: none';

// ----------------------------------------------------
function getSelectorFunction(selector) {
    return function (element) {
        const matches = [];
        if (element.matches(selector)) {
            matches.push(element);
        }
        return matches.concat(Array.from(element.querySelectorAll(selector)));
    };
}
// ----------------------------------------------------
function getElementNodes(nodes) {
    return nodes.filter(node => node instanceof HTMLElement);
}

// ----------------------------------------------------------
const DEFAULT_OPTIONS = {
    event: WatchEvent.ElementsChanged,
    attributes: []
};
// ----------------------------------------------------------
class Watch {
    constructor(cssSelector, callback, options = {}) {
        this.cssSelector = cssSelector;
        this.callback = callback;
        this.context = null;
        this.findExisting = true;
        this.selector = getSelectorFunction(this.cssSelector);
        options = Object.assign({}, DEFAULT_OPTIONS, options);
        if (options.context != null) {
            this.context = options.context;
        }
        if (typeof options.findExisting === 'boolean') {
            this.findExisting = options.findExisting;
        }
        this.events = new Set(options.event ? [options.event] : options.events);
        if (this.events.has(WatchEvent.ElementsChanged)) {
            this.events.add(WatchEvent.ElementsAdded);
            this.events.add(WatchEvent.ElementsRemoved);
        }
        this.attributes = new Set(options.attribute ? [options.attribute] : options.attributes);
    }
    // ----------------------------------------------------
    invoke(added, removed) {
        const changes = {
            added,
            removed
        };
        this.callback.call(this.context, changes);
    }
    // ----------------------------------------------------
    dump() {
        console.groupCollapsed(`%cWatch(%cselector: %c"${this.cssSelector}"%c)`, KW, ATTR, LINK, KW);
        console.log(this.callback.toString());
        if (this.context) {
            console.dir(this.context);
        }
        console.groupEnd();
    }
}

// ----------------------------------------------------------
class Watcher {
    constructor(root = document.body, debug = false) {
        this.root = root;
        this.debug = debug;
        this.observer = null;
        this.watchMap = new Map();
        if (!(root instanceof HTMLElement)) {
            throw new TypeError('Watch root is not a valid HTML element!');
        }
    }
    // ----------------------------------------------------
    add(selector, callback, options = {}) {
        if (this.debug) {
            console.groupCollapsed(`%cWatcher.add(%c${selector}%c, %c${this.count} watches%c)`, KW, LINK, KW, VAL, KW);
            console.log(callback.toString());
            if (options) {
                console.dir(options);
            }
            console.groupEnd();
        }
        const watch = new Watch(selector, callback, options);
        this.watchMap.set(selector, watch);
        return watch;
    }
    // ----------------------------------------------------
    processSummaries(summaries) {
        summaries.forEach(summary => this.processSummary(summary));
    }
    // ----------------------------------------------------
    getAllMatchingElements(selector, rootElements) {
        rootElements.map(selector);
    }
    // ----------------------------------------------------
    processSummary(summary) {
        if (this.debug) {
            console.groupCollapsed(`%cWatcher.processSummary(%ctype=%c${summary.type}%c)`, KW, ATTR, VAL, KW);
            console.dir(summary);
            console.groupEnd();
        }
        const addedElements = getElementNodes(Array.from(summary.addedNodes));
        const removedElements = getElementNodes(Array.from(summary.removedNodes));
        for (const watch of this.watches) {
            const matchingElementsAdded = new Set(addedElements.map(watch.selector).reduce((out, elems) => [...out, ...elems], []));
            const matchingElementsRemoved = new Set(addedElements.map(watch.selector).reduce((out, elems) => [...out, ...elems], []));
            if (matchingElementsAdded.size || matchingElementsRemoved.size) {
                watch.invoke([...matchingElementsAdded], [...matchingElementsRemoved]);
            }
        }
    }
    // ----------------------------------------------------
    get enabled() {
        return !!this.observer;
    }
    // ----------------------------------------------------
    get count() {
        return Object.keys(this.watchMap).length;
    }
    // ----------------------------------------------------
    get watches() {
        return [...Object.values(this.watchMap)];
    }
    // ----------------------------------------------------
    start() {
        if (this.debug) {
            console.info(`%cWatcher.start(%cenabled = %c${this.enabled ? 'true' : 'false'}%c, %c${this.count} watches%c)`, KW, ATTR, VAL, KW, VAL, KW);
        }
        if (!this.observer) {
            // Check for existing elements, pass to callback
            this.watches
                .map(watch => ({ watch, added: watch.selector(this.root) }))
                .filter(({ added }) => added.length > 0)
                .forEach(({ watch, added }) => watch.invoke(added, []));
            this.observer = new MutationObserver(summaries => {
                this.processSummaries(summaries);
            });
            this.observer.observe(this.root, {
                childList: true,
                attributes: true,
                subtree: true
            });
        }
        return this;
    }
    // ----------------------------------------------------
    stop() {
        if (this.observer) {
            this.processSummaries(this.observer.takeRecords());
            this.observer.disconnect();
            this.observer = null;
        }
        return this;
    }
}

return Watcher;

})));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2F0Y2hlci51bWQuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9pbnRlcmZhY2VzLnRzIiwiLi4vc3JjL3N0eWxlcy50cyIsIi4uL3NyYy9kb20udHMiLCIuLi9zcmMvd2F0Y2gudHMiLCIuLi9zcmMvd2F0Y2hlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbnRlcmZhY2UgQ29uc29sZSB7XHJcbiAgZ3JvdXAgKGdyb3VwVGl0bGU/OiBzdHJpbmcsIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSk6IHZvaWRcclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZXhwb3J0IGVudW0gV2F0Y2hFdmVudCB7XHJcbiAgRWxlbWVudHNBZGRlZCxcclxuICBFbGVtZW50c1JlbW92ZWQsXHJcbiAgRWxlbWVudHNDaGFuZ2VkLFxyXG4gIEF0dHJpYnV0ZXNDaGFuZ2VkLFxyXG4gIFRleHRDaGFuZ2VkXHJcbn1cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgV2F0Y2hPcHRpb25zIHtcclxuICBjb250ZXh0PzogT2JqZWN0IHwgbnVsbFxyXG4gIGZpbmRFeGlzdGluZz86IGJvb2xlYW5cclxuICBldmVudD86IFdhdGNoRXZlbnRcclxuICBldmVudHM/OiBXYXRjaEV2ZW50W11cclxuICBhdHRyaWJ1dGU/OiBzdHJpbmdcclxuICBhdHRyaWJ1dGVzPzogc3RyaW5nW11cclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBdHRyaWJ1dGVDaGFuZ2Uge1xyXG4gIHRhcmdldDogSFRNTEVsZW1lbnRcclxuICBhdHRyaWJ1dGU6IHN0cmluZ1xyXG4gIHZhbHVlOiBzdHJpbmcgfCBTVkdOdW1iZXJMaXN0XHJcbn1cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGV4dENoYW5nZSB7XHJcbiAgdGFyZ2V0OiBIVE1MRWxlbWVudFxyXG4gIHRleHQ6IHN0cmluZ1xyXG59XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFdhdGNoUmVzdWx0IHtcclxuICBhZGRlZD86IEhUTUxFbGVtZW50W11cclxuICByZW1vdmVkPzogSFRNTEVsZW1lbnRbXVxyXG4gIGF0dHJpYnV0ZUNoYW5nZWQ/OiBBdHRyaWJ1dGVDaGFuZ2VbXVxyXG4gIHRleHRDaGFuZ2VkPzogVGV4dENoYW5nZVtdXHJcbn1cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSU5vZGUge1xyXG4gIG5vZGVzPzogSU5vZGVbXVxyXG59XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgdHlwZSBTZWxlY3RvckZ1bmMgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQpID0+IEhUTUxFbGVtZW50W11cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmV4cG9ydCB0eXBlIEVsZW1lbnRDaGFuZ2VIYW5kbGVyRnVuYyA9IChjaGFuZ2VzOiBXYXRjaFJlc3VsdCkgPT4gdm9pZFxyXG4iLCJleHBvcnQgY29uc3QgSU5WID0gJ2NvbG9yOiB3aGl0ZTsgYmFja2dyb3VuZDogYmxhY2snXHJcbmV4cG9ydCBjb25zdCBFUlJPUiA9ICdmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICNmNGYnXHJcbmV4cG9ydCBjb25zdCBMSU5LID0gJ2NvbG9yOiAjMDVmOyBmb250LXdlaWdodDogbm9ybWFsOyB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZSdcclxuZXhwb3J0IGNvbnN0IEJPTEQgPSAnZm9udC13ZWlnaHQ6IGJvbGQnXHJcbmV4cG9ydCBjb25zdCBCTFVFID0gJ2NvbG9yOiAjMDVmJ1xyXG5leHBvcnQgY29uc3QgS1cgPSAnY29sb3I6ICMzNWI7IGZvbnQtd2VpZ2h0OiBib2xkOyBmb250LXN0eWxlOiBub3JtYWw7IHRleHQtZGVjb3JhdGlvbjogbm9uZSdcclxuZXhwb3J0IGNvbnN0IEFUVFIgPSAnY29sb3I6ICM1NjM7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IGZvbnQtc3R5bGU6IGl0YWxpYzsgdGV4dC1kZWNvcmF0aW9uOiBub25lJ1xyXG5leHBvcnQgY29uc3QgVkFMID0gJ2NvbG9yOiAjYzM2OyBmb250LXdlaWdodDogbm9ybWFsOyBmb250LXN0eWxlOiBub3JtYWw7IHRleHQtZGVjb3JhdGlvbjogbm9uZSdcclxuIiwiaW1wb3J0IHsgU2VsZWN0b3JGdW5jIH0gZnJvbSAnLi9pbnRlcmZhY2VzJ1xyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlbGVjdG9yRnVuY3Rpb24gKHNlbGVjdG9yOiBzdHJpbmcpOiBTZWxlY3RvckZ1bmMge1xyXG4gIHJldHVybiBmdW5jdGlvbiAoZWxlbWVudDogSFRNTEVsZW1lbnQpOiBIVE1MRWxlbWVudFtdIHtcclxuICAgIGNvbnN0IG1hdGNoZXM6IEhUTUxFbGVtZW50W10gPSBbXVxyXG5cclxuICAgIGlmIChlbGVtZW50Lm1hdGNoZXMoc2VsZWN0b3IpKSB7XHJcbiAgICAgIG1hdGNoZXMucHVzaChlbGVtZW50KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtYXRjaGVzLmNvbmNhdChBcnJheS5mcm9tKGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpKVxyXG4gIH1cclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnROb2RlcyAobm9kZXM6IE5vZGVbXSk6IEhUTUxFbGVtZW50W10ge1xyXG4gIHJldHVybiBub2Rlcy5maWx0ZXIobm9kZSA9PiBub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIGFzIEhUTUxFbGVtZW50W11cclxufVxyXG4iLCJpbXBvcnQgeyBXYXRjaEV2ZW50LCBXYXRjaE9wdGlvbnMsIFNlbGVjdG9yRnVuYywgRWxlbWVudENoYW5nZUhhbmRsZXJGdW5jIH0gZnJvbSAnLi9pbnRlcmZhY2VzJ1xyXG5pbXBvcnQgeyBLVyAsIEFUVFIsIExJTksgfSBmcm9tICcuL3N0eWxlcydcclxuXHJcbmltcG9ydCB7IGdldFNlbGVjdG9yRnVuY3Rpb24gfSBmcm9tICcuL2RvbSdcclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmNvbnN0IERFRkFVTFRfT1BUSU9OUzogV2F0Y2hPcHRpb25zID0ge1xyXG4gIGV2ZW50OiBXYXRjaEV2ZW50LkVsZW1lbnRzQ2hhbmdlZCxcclxuICBhdHRyaWJ1dGVzOiBbXVxyXG59XHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgY2xhc3MgV2F0Y2gge1xyXG4gIHB1YmxpYyBzZWxlY3RvcjogU2VsZWN0b3JGdW5jXHJcblxyXG4gIHB1YmxpYyBjb250ZXh0OiBPYmplY3QgfCBudWxsID0gbnVsbFxyXG4gIHB1YmxpYyBmaW5kRXhpc3Rpbmc6IGJvb2xlYW4gPSB0cnVlXHJcbiAgcHVibGljIGV2ZW50czogU2V0PFdhdGNoRXZlbnQ+XHJcbiAgcHVibGljIGF0dHJpYnV0ZXM6IFNldDxzdHJpbmc+XHJcblxyXG4gIGNvbnN0cnVjdG9yIChcclxuICAgIHB1YmxpYyByZWFkb25seSBjc3NTZWxlY3Rvcjogc3RyaW5nLFxyXG4gICAgcHVibGljIHJlYWRvbmx5IGNhbGxiYWNrOiBFbGVtZW50Q2hhbmdlSGFuZGxlckZ1bmMsXHJcbiAgICBvcHRpb25zOiBXYXRjaE9wdGlvbnMgPSB7fVxyXG4gICkge1xyXG4gICAgdGhpcy5zZWxlY3RvciA9IGdldFNlbGVjdG9yRnVuY3Rpb24odGhpcy5jc3NTZWxlY3RvcilcclxuXHJcbiAgICBvcHRpb25zID0geyAuLi5ERUZBVUxUX09QVElPTlMsIC4uLm9wdGlvbnMgfVxyXG5cclxuICAgIGlmIChvcHRpb25zLmNvbnRleHQgIT0gbnVsbCkge1xyXG4gICAgICB0aGlzLmNvbnRleHQgPSBvcHRpb25zLmNvbnRleHRcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmluZEV4aXN0aW5nID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgdGhpcy5maW5kRXhpc3RpbmcgPSBvcHRpb25zLmZpbmRFeGlzdGluZ1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuZXZlbnRzID0gbmV3IFNldChvcHRpb25zLmV2ZW50ID8gWyBvcHRpb25zLmV2ZW50IF0gOiBvcHRpb25zLmV2ZW50cylcclxuXHJcbiAgICBpZiAodGhpcy5ldmVudHMuaGFzKFdhdGNoRXZlbnQuRWxlbWVudHNDaGFuZ2VkKSkge1xyXG4gICAgICB0aGlzLmV2ZW50cy5hZGQoV2F0Y2hFdmVudC5FbGVtZW50c0FkZGVkKVxyXG4gICAgICB0aGlzLmV2ZW50cy5hZGQoV2F0Y2hFdmVudC5FbGVtZW50c1JlbW92ZWQpXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5hdHRyaWJ1dGVzID0gbmV3IFNldChvcHRpb25zLmF0dHJpYnV0ZSA/IFsgb3B0aW9ucy5hdHRyaWJ1dGUgXSA6IG9wdGlvbnMuYXR0cmlidXRlcylcclxuICB9XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgaW52b2tlIChhZGRlZDogSFRNTEVsZW1lbnRbXSwgcmVtb3ZlZDogSFRNTEVsZW1lbnRbXSk6IHZvaWQge1xyXG4gICAgY29uc3QgY2hhbmdlcyA9IHtcclxuICAgICAgYWRkZWQsXHJcbiAgICAgIHJlbW92ZWRcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNhbGxiYWNrLmNhbGwodGhpcy5jb250ZXh0LCBjaGFuZ2VzKVxyXG4gIH1cclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBkdW1wICgpIHtcclxuICAgIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQoYCVjV2F0Y2goJWNzZWxlY3RvcjogJWNcIiR7dGhpcy5jc3NTZWxlY3Rvcn1cIiVjKWAsIEtXLCBBVFRSLCBMSU5LLCBLVylcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuY2FsbGJhY2sudG9TdHJpbmcoKSlcclxuICAgIGlmICh0aGlzLmNvbnRleHQpIHtcclxuICAgICAgY29uc29sZS5kaXIodGhpcy5jb250ZXh0KVxyXG4gICAgfVxyXG4gICAgY29uc29sZS5ncm91cEVuZCgpXHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFNlbGVjdG9yRnVuYywgRWxlbWVudENoYW5nZUhhbmRsZXJGdW5jLCBXYXRjaE9wdGlvbnMgfSBmcm9tICcuL2ludGVyZmFjZXMnXHJcbmltcG9ydCB7IEJPTEQsIEtXLCBBVFRSLCBWQUwsIExJTksgfSBmcm9tICcuL3N0eWxlcydcclxuXHJcbmltcG9ydCB7IFdhdGNoIH0gZnJvbSAnLi93YXRjaCdcclxuaW1wb3J0IHsgZ2V0U2VsZWN0b3JGdW5jdGlvbiwgZ2V0RWxlbWVudE5vZGVzIH0gZnJvbSAnLi9kb20nXHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXYXRjaGVyIHtcclxuXHJcbiAgb2JzZXJ2ZXI6IE11dGF0aW9uT2JzZXJ2ZXIgfCBudWxsID0gbnVsbFxyXG5cclxuICB3YXRjaE1hcDogTWFwPHN0cmluZywgV2F0Y2g+ID0gbmV3IE1hcCgpXHJcblxyXG4gIGNvbnN0cnVjdG9yIChcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgcm9vdDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5ib2R5LFxyXG4gICAgcHJpdmF0ZSByZWFkb25seSBkZWJ1ZzogYm9vbGVhbiA9IGZhbHNlXHJcbiAgKSB7XHJcbiAgICBpZiAoIShyb290IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1dhdGNoIHJvb3QgaXMgbm90IGEgdmFsaWQgSFRNTCBlbGVtZW50IScpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIGFkZCAoc2VsZWN0b3I6IHN0cmluZywgY2FsbGJhY2s6IEVsZW1lbnRDaGFuZ2VIYW5kbGVyRnVuYywgb3B0aW9uczogV2F0Y2hPcHRpb25zID0ge30pOiBXYXRjaCB7XHJcbiAgICBpZiAodGhpcy5kZWJ1Zykge1xyXG4gICAgICBjb25zb2xlLmdyb3VwQ29sbGFwc2VkKGAlY1dhdGNoZXIuYWRkKCVjJHtzZWxlY3Rvcn0lYywgJWMke3RoaXMuY291bnR9IHdhdGNoZXMlYylgLCBLVywgTElOSywgS1csIFZBTCwgS1cpXHJcbiAgICAgIGNvbnNvbGUubG9nKGNhbGxiYWNrLnRvU3RyaW5nKCkpXHJcbiAgICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc29sZS5kaXIob3B0aW9ucylcclxuICAgICAgfVxyXG4gICAgICBjb25zb2xlLmdyb3VwRW5kKClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB3YXRjaCA9IG5ldyBXYXRjaChzZWxlY3RvciwgY2FsbGJhY2ssIG9wdGlvbnMpXHJcblxyXG4gICAgdGhpcy53YXRjaE1hcC5zZXQoc2VsZWN0b3IsIHdhdGNoKVxyXG5cclxuICAgIHJldHVybiB3YXRjaFxyXG4gIH1cclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBwcm9jZXNzU3VtbWFyaWVzIChzdW1tYXJpZXM6IE11dGF0aW9uUmVjb3JkW10pOiB2b2lkIHtcclxuICAgIHN1bW1hcmllcy5mb3JFYWNoKHN1bW1hcnkgPT4gdGhpcy5wcm9jZXNzU3VtbWFyeShzdW1tYXJ5KSlcclxuICB9XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgZ2V0QWxsTWF0Y2hpbmdFbGVtZW50cyAoc2VsZWN0b3I6IFNlbGVjdG9yRnVuYywgcm9vdEVsZW1lbnRzOiBIVE1MRWxlbWVudFtdKSB7XHJcbiAgICByb290RWxlbWVudHMubWFwKHNlbGVjdG9yKVxyXG4gIH1cclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBwcm9jZXNzU3VtbWFyeSAoc3VtbWFyeTogTXV0YXRpb25SZWNvcmQpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmRlYnVnKSB7XHJcbiAgICAgIGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQoYCVjV2F0Y2hlci5wcm9jZXNzU3VtbWFyeSglY3R5cGU9JWMke3N1bW1hcnkudHlwZX0lYylgLCBLVywgQVRUUiwgVkFMLCBLVylcclxuICAgICAgY29uc29sZS5kaXIoc3VtbWFyeSlcclxuICAgICAgY29uc29sZS5ncm91cEVuZCgpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgYWRkZWRFbGVtZW50czogSFRNTEVsZW1lbnRbXSA9IGdldEVsZW1lbnROb2RlcyhBcnJheS5mcm9tKHN1bW1hcnkuYWRkZWROb2RlcykpXHJcbiAgICBjb25zdCByZW1vdmVkRWxlbWVudHM6IEhUTUxFbGVtZW50W10gPSBnZXRFbGVtZW50Tm9kZXMoQXJyYXkuZnJvbShzdW1tYXJ5LnJlbW92ZWROb2RlcykpXHJcblxyXG4gICAgZm9yIChjb25zdCB3YXRjaCBvZiB0aGlzLndhdGNoZXMpIHtcclxuICAgICAgY29uc3QgbWF0Y2hpbmdFbGVtZW50c0FkZGVkID0gbmV3IFNldDxIVE1MRWxlbWVudD4oYWRkZWRFbGVtZW50cy5tYXAod2F0Y2guc2VsZWN0b3IpLnJlZHVjZSgob3V0LCBlbGVtcykgPT4gWyAuLi5vdXQsIC4uLmVsZW1zIF0sIFtdKSlcclxuICAgICAgY29uc3QgbWF0Y2hpbmdFbGVtZW50c1JlbW92ZWQgPSBuZXcgU2V0PEhUTUxFbGVtZW50PihhZGRlZEVsZW1lbnRzLm1hcCh3YXRjaC5zZWxlY3RvcikucmVkdWNlKChvdXQsIGVsZW1zKSA9PiBbIC4uLm91dCwgLi4uZWxlbXMgXSwgW10pKVxyXG5cclxuICAgICAgaWYgKG1hdGNoaW5nRWxlbWVudHNBZGRlZC5zaXplIHx8IG1hdGNoaW5nRWxlbWVudHNSZW1vdmVkLnNpemUpIHtcclxuICAgICAgICB3YXRjaC5pbnZva2UoWyAuLi5tYXRjaGluZ0VsZW1lbnRzQWRkZWQgXSwgWyAuLi5tYXRjaGluZ0VsZW1lbnRzUmVtb3ZlZCBdKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIGdldCBlbmFibGVkICgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiAhIXRoaXMub2JzZXJ2ZXJcclxuICB9XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgZ2V0IGNvdW50ICgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMud2F0Y2hNYXApLmxlbmd0aFxyXG4gIH1cclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBnZXQgd2F0Y2hlcyAoKTogV2F0Y2hbXSB7XHJcbiAgICByZXR1cm4gWyAuLi5PYmplY3QudmFsdWVzKHRoaXMud2F0Y2hNYXApIF1cclxuICB9XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgc3RhcnQgKCk6IFdhdGNoZXIge1xyXG4gICAgaWYgKHRoaXMuZGVidWcpIHtcclxuICAgICAgY29uc29sZS5pbmZvKGAlY1dhdGNoZXIuc3RhcnQoJWNlbmFibGVkID0gJWMke3RoaXMuZW5hYmxlZCA/ICd0cnVlJyA6ICdmYWxzZSd9JWMsICVjJHt0aGlzLmNvdW50fSB3YXRjaGVzJWMpYCwgS1csIEFUVFIsIFZBTCwgS1csIFZBTCwgS1cpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCF0aGlzLm9ic2VydmVyKSB7XHJcbiAgICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBlbGVtZW50cywgcGFzcyB0byBjYWxsYmFja1xyXG4gICAgICB0aGlzLndhdGNoZXNcclxuICAgICAgICAubWFwKHdhdGNoID0+ICh7IHdhdGNoLCBhZGRlZDogd2F0Y2guc2VsZWN0b3IodGhpcy5yb290KSB9KSlcclxuICAgICAgICAuZmlsdGVyKCh7IGFkZGVkIH0pID0+IGFkZGVkLmxlbmd0aCA+IDApXHJcbiAgICAgICAgLmZvckVhY2goKHsgd2F0Y2gsIGFkZGVkIH0pID0+IHdhdGNoLmludm9rZShhZGRlZCwgW10pKVxyXG5cclxuICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHN1bW1hcmllcyA9PiB7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzU3VtbWFyaWVzKHN1bW1hcmllcylcclxuICAgICAgfSlcclxuXHJcbiAgICAgIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnJvb3QsIHtcclxuICAgICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcclxuICAgICAgICBzdWJ0cmVlOiB0cnVlXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXNcclxuICB9XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgc3RvcCAoKTogV2F0Y2hlciB7XHJcbiAgICBpZiAodGhpcy5vYnNlcnZlcikge1xyXG4gICAgICB0aGlzLnByb2Nlc3NTdW1tYXJpZXModGhpcy5vYnNlcnZlci50YWtlUmVjb3JkcygpKVxyXG5cclxuICAgICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KClcclxuICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGxcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpc1xyXG4gIH1cclxuXHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUlBO0FBRUEsQUFBQSxJQUFZLFVBTVg7QUFORCxXQUFZLFVBQVU7SUFDcEIsNkRBQWEsQ0FBQTtJQUNiLGlFQUFlLENBQUE7SUFDZixpRUFBZSxDQUFBO0lBQ2YscUVBQWlCLENBQUE7SUFDakIseURBQVcsQ0FBQTtDQUNaLEVBTlcsVUFBVSxLQUFWLFVBQVUsUUFNckI7O0FDVk0sTUFBTSxJQUFJLEdBQUcsOERBQThELENBQUE7QUFDbEYsQUFFTyxNQUFNLEVBQUUsR0FBRywyRUFBMkUsQ0FBQTtBQUM3RixBQUFPLE1BQU0sSUFBSSxHQUFHLDZFQUE2RSxDQUFBO0FBQ2pHLEFBQU8sTUFBTSxHQUFHLEdBQUcsNkVBQTZFLENBQUE7O0FDTGhHO0FBRUEsNkJBQXFDLFFBQWdCO0lBQ25ELE9BQU8sVUFBVSxPQUFvQjtRQUNuQyxNQUFNLE9BQU8sR0FBa0IsRUFBRSxDQUFBO1FBRWpDLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUM3QixPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFBO1NBQ3RCO1FBRUQsT0FBTyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQTtLQUN0RSxDQUFBO0NBQ0Y7O0FBSUQseUJBQWlDLEtBQWE7SUFDNUMsT0FBTyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxJQUFJLFlBQVksV0FBVyxDQUFrQixDQUFBO0NBQzFFOztBQ2ZEO0FBRUEsTUFBTSxlQUFlLEdBQWlCO0lBQ3BDLEtBQUssRUFBRSxVQUFVLENBQUMsZUFBZTtJQUNqQyxVQUFVLEVBQUUsRUFBRTtDQUNmLENBQUE7O0FBSUQ7SUFRRSxZQUNrQixXQUFtQixFQUNuQixRQUFrQyxFQUNsRCxVQUF3QixFQUFFO1FBRlYsZ0JBQVcsR0FBWCxXQUFXLENBQVE7UUFDbkIsYUFBUSxHQUFSLFFBQVEsQ0FBMEI7UUFQN0MsWUFBTyxHQUFrQixJQUFJLENBQUE7UUFDN0IsaUJBQVksR0FBWSxJQUFJLENBQUE7UUFTakMsSUFBSSxDQUFDLFFBQVEsR0FBRyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUE7UUFFckQsT0FBTyxxQkFBUSxlQUFlLEVBQUssT0FBTyxDQUFFLENBQUE7UUFFNUMsSUFBSSxPQUFPLENBQUMsT0FBTyxJQUFJLElBQUksRUFBRTtZQUMzQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUE7U0FDL0I7UUFFRCxJQUFJLE9BQU8sT0FBTyxDQUFDLFlBQVksS0FBSyxTQUFTLEVBQUU7WUFDN0MsSUFBSSxDQUFDLFlBQVksR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFBO1NBQ3pDO1FBRUQsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHLENBQUUsT0FBTyxDQUFDLEtBQUssQ0FBRSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQTtRQUV6RSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsRUFBRTtZQUMvQyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLENBQUE7WUFDekMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLGVBQWUsQ0FBQyxDQUFBO1NBQzVDO1FBRUQsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLENBQUUsT0FBTyxDQUFDLFNBQVMsQ0FBRSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQTtLQUMxRjs7SUFJRCxNQUFNLENBQUUsS0FBb0IsRUFBRSxPQUFzQjtRQUNsRCxNQUFNLE9BQU8sR0FBRztZQUNkLEtBQUs7WUFDTCxPQUFPO1NBQ1IsQ0FBQTtRQUVELElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUE7S0FDMUM7O0lBSUQsSUFBSTtRQUNGLE9BQU8sQ0FBQyxjQUFjLENBQUMsMEJBQTBCLElBQUksQ0FBQyxXQUFXLE1BQU0sRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQTtRQUM1RixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQTtRQUNyQyxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDaEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUE7U0FDMUI7UUFDRCxPQUFPLENBQUMsUUFBUSxFQUFFLENBQUE7S0FDbkI7Q0FDRjs7QUNoRUQ7QUFFQTtJQU1FLFlBQ21CLE9BQW9CLFFBQVEsQ0FBQyxJQUFJLEVBQ2pDLFFBQWlCLEtBQUs7UUFEdEIsU0FBSSxHQUFKLElBQUksQ0FBNkI7UUFDakMsVUFBSyxHQUFMLEtBQUssQ0FBaUI7UUFOekMsYUFBUSxHQUE0QixJQUFJLENBQUE7UUFFeEMsYUFBUSxHQUF1QixJQUFJLEdBQUcsRUFBRSxDQUFBO1FBTXRDLElBQUksRUFBRSxJQUFJLFlBQVksV0FBVyxDQUFDLEVBQUU7WUFDbEMsTUFBTSxJQUFJLFNBQVMsQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFBO1NBQy9EO0tBQ0Y7O0lBSUQsR0FBRyxDQUFFLFFBQWdCLEVBQUUsUUFBa0MsRUFBRSxVQUF3QixFQUFFO1FBQ25GLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNkLE9BQU8sQ0FBQyxjQUFjLENBQUMsbUJBQW1CLFFBQVEsU0FBUyxJQUFJLENBQUMsS0FBSyxhQUFhLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFBO1lBQzFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUE7WUFDaEMsSUFBSSxPQUFPLEVBQUU7Z0JBQ1gsT0FBTyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQTthQUNyQjtZQUNELE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQTtTQUNuQjtRQUVELE1BQU0sS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUE7UUFFcEQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBRWxDLE9BQU8sS0FBSyxDQUFBO0tBQ2I7O0lBSUQsZ0JBQWdCLENBQUUsU0FBMkI7UUFDM0MsU0FBUyxDQUFDLE9BQU8sQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFBO0tBQzNEOztJQUlELHNCQUFzQixDQUFFLFFBQXNCLEVBQUUsWUFBMkI7UUFDekUsWUFBWSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQTtLQUMzQjs7SUFJRCxjQUFjLENBQUUsT0FBdUI7UUFDckMsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ2QsT0FBTyxDQUFDLGNBQWMsQ0FBQyxxQ0FBcUMsT0FBTyxDQUFDLElBQUksS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsQ0FBQyxDQUFBO1lBQ2pHLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUE7WUFDcEIsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFBO1NBQ25CO1FBRUQsTUFBTSxhQUFhLEdBQWtCLGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFBO1FBQ3BGLE1BQU0sZUFBZSxHQUFrQixlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQTtRQUV4RixLQUFLLE1BQU0sS0FBSyxJQUFJLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDaEMsTUFBTSxxQkFBcUIsR0FBRyxJQUFJLEdBQUcsQ0FBYyxhQUFhLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsS0FBSyxLQUFLLENBQUUsR0FBRyxHQUFHLEVBQUUsR0FBRyxLQUFLLENBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBO1lBQ3RJLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxHQUFHLENBQWMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxFQUFFLEtBQUssS0FBSyxDQUFFLEdBQUcsR0FBRyxFQUFFLEdBQUcsS0FBSyxDQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQTtZQUV4SSxJQUFJLHFCQUFxQixDQUFDLElBQUksSUFBSSx1QkFBdUIsQ0FBQyxJQUFJLEVBQUU7Z0JBQzlELEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBRSxHQUFHLHFCQUFxQixDQUFFLEVBQUUsQ0FBRSxHQUFHLHVCQUF1QixDQUFFLENBQUMsQ0FBQTthQUMzRTtTQUNGO0tBQ0Y7O0lBSUQsSUFBSSxPQUFPO1FBQ1QsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQTtLQUN2Qjs7SUFJRCxJQUFJLEtBQUs7UUFDUCxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQTtLQUN6Qzs7SUFJRCxJQUFJLE9BQU87UUFDVCxPQUFPLENBQUUsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBRSxDQUFBO0tBQzNDOztJQUlELEtBQUs7UUFDSCxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDZCxPQUFPLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sR0FBRyxPQUFPLFNBQVMsSUFBSSxDQUFDLEtBQUssYUFBYSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUE7U0FDM0k7UUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRTs7WUFFbEIsSUFBSSxDQUFDLE9BQU87aUJBQ1QsR0FBRyxDQUFDLEtBQUssS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2lCQUMzRCxNQUFNLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2lCQUN2QyxPQUFPLENBQUMsQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFBO1lBRXpELElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxnQkFBZ0IsQ0FBQyxTQUFTO2dCQUM1QyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLENBQUE7YUFDakMsQ0FBQyxDQUFBO1lBRUYsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTtnQkFDL0IsU0FBUyxFQUFFLElBQUk7Z0JBQ2YsVUFBVSxFQUFFLElBQUk7Z0JBQ2hCLE9BQU8sRUFBRSxJQUFJO2FBQ2QsQ0FBQyxDQUFBO1NBQ0g7UUFFRCxPQUFPLElBQUksQ0FBQTtLQUNaOztJQUlELElBQUk7UUFDRixJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDakIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQTtZQUVsRCxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxDQUFBO1lBQzFCLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFBO1NBQ3JCO1FBRUQsT0FBTyxJQUFJLENBQUE7S0FDWjtDQUVGOzs7Ozs7OzsifQ==
